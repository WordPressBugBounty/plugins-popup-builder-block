(()=>{"use strict";var e={n:t=>{var o=t&&t.__esModule?()=>t.default:()=>t;return e.d(o,{a:o}),o},d:(t,o)=>{for(var n in o)e.o(o,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:o[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=(e,t)=>{let o=e.getAttribute("id");o=o.replace("popup-builder-","");const{entrAnimation:n,exitAnimation:r,animationDuration:s,type:i}=t||{},c=e.querySelector(".popup-builder-container");c.classList.remove(`${n}`),c.classList.add(`${r}`),c.classList.add("reverse"),setTimeout((()=>{["popup","full-screen"].includes(i)&&t?.preventScroll&&(window.parent.document.body.style.overflow=""),e.classList.remove("popup-builder-modal--open"),c.classList.remove(`${r}`),c.classList.remove("reverse"),window.frameElement&&window.frameElement.remove()}),1e3*s)},o=window.wp.apiFetch;var n=e.n(o);const r=(e,t)=>{e&&!function(e){const t=`; ${document.cookie}`.split(`; ${e}=`);return 2===t.length?t.pop().split(";").shift():null}(`pbb_conversion_${t}`)&&((e,t)=>{const o=Number(sessionStorage.getItem("pbb_logs"));n()({path:"/pbb/v1/popup/logs",method:"PUT",data:{id:o,...e}}).then((e=>{t&&t(e)}))})({converted:!0,refferer:window.parent.document.referrer},(e=>{"success"===e.status?function(e,t,o){const n=new Date;n.setTime(n.getTime()+60*o*60*1e3);const r=`expires=${n.toUTCString()}`;document.cookie=`${e}=${t}; ${r}; path=/`}(`pbb_conversion_${t}`,"true",8760):console.error("Error updating conversion count:",e.message)}))};window.addEventListener("load",(()=>{const e=document.querySelectorAll(".pbb-btn"),o=(e,t)=>{const o=document.getElementById(`popup-builder-${e}`),n=JSON.parse(o.getAttribute("data-settings"));t(o,n)};for(const n of e){const e=JSON.parse(n.getAttribute("data-settings")),{istrackConversion:s,clickEvent:i,closeCampaign:c}=e||{};(["closeCampaign","openUrl"].includes(i)||s)&&n.addEventListener("click",(e=>{e.preventDefault();const p=n.closest(".popup-builder-modal"),a=p?.id.replace("popup-builder-","");if(r(s,a),"closeCampaign"===i&&c)o(c,t);else if("openUrl"===i){const e=n.getAttribute("href"),t=n.getAttribute("target");e&&window.top.open(e,t||"_self")}}))}}))})();